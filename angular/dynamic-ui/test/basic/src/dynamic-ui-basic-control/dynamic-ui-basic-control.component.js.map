{"version":3,"sources":["basic/src/dynamic-ui-basic-control/dynamic-ui-basic-control.component.ts"],"names":[],"mappings":"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","file":"dynamic-ui-basic-control.component.js","sourcesContent":["import {\r\n  Component,\r\n  OnInit,\r\n  AfterViewInit,\r\n  OnDestroy,\r\n  Input,\r\n  ViewContainerRef,\r\n  ComponentFactoryResolver,\r\n  Type,\r\n  EventEmitter,\r\n  Output,\r\n  QueryList,\r\n  ComponentRef,\r\n  ContentChildren,\r\n  ChangeDetectorRef\r\n} from \"@angular/core\";\r\nimport { FormGroup, FormControl } from \"@angular/forms\";\r\n\r\nimport {\r\n  ComponentModel,\r\n  BaseFormControlComponent,\r\n  BaseFormControlEvent,\r\n  ComponentTemplateDirective,\r\n  DynamicUIFormValidationService,\r\n  Utils\r\n} from \"@bpw-ui/base\";\r\n\r\nimport {\r\n  DynamicUIBasicFormControlComponent,\r\n  DynamicUIBasicFormControlType\r\n} from \"../dynamic-ui-basic-form-control/dynamic-ui-basic-form-control.component\";\r\nimport {\r\n  DynamicUIBasicComponentTypes\r\n} from \"../dynamic-ui-basic.model\";\r\n\r\n@Component({\r\n  selector: 'dynamic-ui-basic-control',\r\n  template: `{{htmlTemplate}}`\r\n})\r\nexport class DynamicUIBasicControlComponent extends BaseFormControlComponent implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  @Input() componentId: boolean = true;\r\n  @Input() context: ComponentModel = null;\r\n  @Input() group: FormGroup;\r\n  @Input() hasErrorMessaging: boolean = false;\r\n  @Input() model: ComponentModel;\r\n  @Input() nestedTemplates: QueryList<ComponentTemplateDirective>;\r\n\r\n  @Output() blur: EventEmitter<BaseFormControlEvent> = new EventEmitter<BaseFormControlEvent>();\r\n  @Output() change: EventEmitter<BaseFormControlEvent> = new EventEmitter<BaseFormControlEvent>();\r\n  @Output() focus: EventEmitter<BaseFormControlEvent> = new EventEmitter<BaseFormControlEvent>();\r\n  @ContentChildren(ComponentTemplateDirective) contentTemplates: QueryList<ComponentTemplateDirective>;\r\n  componentRef: ComponentRef<DynamicUIBasicFormControlComponent>;\r\n  htmlTemplate: string = '';\r\n  type = 'control';\r\n\r\n  constructor(\r\n      private viewContainerRef: ViewContainerRef,\r\n      private cfr: ComponentFactoryResolver,\r\n      protected changeDetectorRef: ChangeDetectorRef,\r\n      protected validationService: DynamicUIFormValidationService) {\r\n    super(changeDetectorRef, validationService);\r\n  }\r\n\r\n  ngOnInit() {\r\n    const type = DynamicUIBasicFormControlComponent.getFormControlType(this.model);\r\n    try {\r\n        const typ = DynamicUIBasicComponentTypes[type];\r\n        this.viewContainerRef.clear();\r\n        const compFactory = this.cfr.resolveComponentFactory(typ);\r\n        this.componentRef = this.viewContainerRef.createComponent(compFactory);\r\n        const vc = this.componentRef.instance;\r\n        vc.componentId = this.componentId;\r\n        vc.context = this.context;\r\n        vc.group = this.group;\r\n        vc.hasErrorMessaging = this.hasErrorMessaging;\r\n        vc.model = this.model;\r\n        vc.nestedTemplates = this.nestedTemplates;\r\n        vc.blur = this.blur;\r\n        vc.change = this.change;\r\n        vc.focus = this.focus;\r\n        vc.setupControl();\r\n      } catch (ex) {\r\n        // if(ex === NoComponentFactoryError) {\r\n        this.htmlTemplate = ex.toString();\r\n        // }\r\n        Utils.err(ex);\r\n      }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    setTimeout(() => {\r\n      this.componentRef.instance.contentTemplates = this.contentTemplates;\r\n      this.componentRef.instance.setTemplates();\r\n    }, 0); // setTimeout to trigger change detection\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.componentRef.destroy();\r\n  }\r\n\r\n  onEvent() {\r\n\r\n  }\r\n}\r\n"]}